<section class="w-full min-h-screen pt-[25vw] sm:pt-[15vw] md:pt-[10vw] pb-8 md:pb-[3vw] overflow-hidden font-sans bg-green-50 relative">
  <!-- Fondo -->
  <img
    src="assets/images/fondoCudeca.png"
    alt="Fondo"
    class="absolute inset-0 w-full h-full object-cover -z-10"
  />
  <div class="absolute inset-0 bg-green-400 opacity-30 -z-5"></div>

  <div class="max-w-[95vw] md:max-w-[90vw] mx-auto relative z-10 px-4 md:px-0">
    
    <!-- Loading -->
    <div *ngIf="isLoading" class="flex flex-col items-center justify-center h-[50vh]">
      <div class="animate-spin rounded-full h-12 w-12 md:h-[5vw] md:w-[5vw] border-b-4 md:border-b-[0.4vw] border-green-700 mb-4 md:mb-[2vw]"></div>
      <p class="text-green-800 text-xl md:text-[1.5vw] font-bold">Cargando detalles...</p>
    </div>

    <!-- Contenido principal -->
    <div *ngIf="!isLoading && evento" class="bg-white rounded-3xl md:rounded-[2vw] shadow-2xl overflow-hidden p-6 md:p-[2.5vw]">
      
      <!-- IZQUIERDA: Imagen + t√≠tulo + inscripci√≥n -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-[3vw] items-start">
        
        <!-- Imagen -->
        <div class="md:col-span-1 flex flex-col items-start w-full">
          <div class="w-full h-64 md:h-[18vw] rounded-2xl md:rounded-[1.5vw] overflow-hidden shadow-md">
            <img [src]="evento.imagen" alt="Imagen del evento" class="w-full h-full object-cover">
          </div>
          
          <!-- T√≠tulo -->
          <h1 class="text-2xl md:text-[2vw] font-bold text-green-600 mt-4 md:mt-[1vw] leading-tight">
            {{ evento.titulo }}
          </h1>
          
          <!-- Informaci√≥n de inscripci√≥n -->
          <div class="mt-6 md:mt-[2vw] w-full">
            <div class="space-y-4 md:space-y-[1.5vw] mb-4 md:mb-[1.5vw] text-base md:text-[1.1vw]">
              <div class="flex items-start gap-2">
                <span class="text-gray-600 shrink-0">üó∫Ô∏èüìå:</span>
                <span class="font-bold text-green-600 break-words">{{ evento.ubicacion }}</span>
              </div>
              <div class="flex justify-between items-center border-b border-gray-100 pb-2 md:border-none md:pb-0">
                <span class="text-gray-600">Aforo total:</span>
                <span class="font-bold text-gray-900">{{ evento.capacidad }} pers.</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-600">Inscritos:</span>
                <span class="font-bold text-green-700">{{ evento.inscritos }} pers.</span>
              </div>
            </div>
            
            <div class="w-full bg-gray-200 rounded-full h-4 md:h-[1vw] mb-2 md:mb-[0.5vw] overflow-hidden">
              <div class="bg-green-600 h-full rounded-full transition-all duration-500" 
                   [style.width.%]="(evento.inscritos / evento.capacidad) * 100"></div>
            </div>
            <p class="text-sm md:text-[0.9vw] text-gray-500 text-right">
              {{ evento.capacidad - evento.inscritos }} plazas disponibles
            </p>
          </div>
        </div>

        <!-- DERECHA: Descripci√≥n + causa solidaria + botones -->
        <div class="md:col-span-2 flex flex-col w-full">
          <!-- Descripci√≥n -->
          <h3 class="text-xl md:text-[2vw] font-bold text-green-600 mb-4 md:mb-[1.5vw] border-b border-gray-200 pb-2 md:pb-[1vw]">
            Descripci√≥n
          </h3>
          <p class="text-gray-700 text-base md:text-[1.2vw] leading-relaxed whitespace-pre-line mb-8 md:mb-[3vw]">
            {{ evento.descripcion }}
          </p>

          <!-- Objetivo recaudacion / total recaudado -->
          <div *ngIf="evento.objetivoRecaudacion && evento.objetivoRecaudacion > 0" 
              class="bg-green-50 p-4 md:p-[2vw] rounded-xl md:rounded-[1.5vw] border border-green-200 mb-8 md:mb-[3vw]">
            
            <div class="flex items-center gap-3 md:gap-[1vw] mb-4 md:mb-[1.5vw]">
              <div class="bg-green-200 p-2 md:p-[0.8vw] rounded-lg md:rounded-[1vw] text-xl md:text-[1.5vw]">üéØ</div>
              <div>
                <h3 class="font-bold md:pb-[0.5vw] text-green-800 text-base md:text-[1.3vw]">Objetivo Solidario</h3>
                <p class="text-green-700 text-sm md:text-[1vw]">Ay√∫danos a alcanzar nuestra meta</p>
              </div>
            </div>

            <div class="w-full bg-white border border-green-100 rounded-full h-6 md:h-[1.5vw] relative overflow-hidden mb-2 md:mb-[0.5vw]">
              <div class="bg-gradient-to-r from-green-500 to-green-600 h-full rounded-full transition-all duration-1000"
                   [style.width.%]="(evento.totalRecaudado! / evento.objetivoRecaudacion!) * 100 > 100 ? 100 : (evento.totalRecaudado! / evento.objetivoRecaudacion!) * 100">
              </div>
              <div class="absolute inset-0 flex items-center justify-center text-xs md:text-[0.9vw] font-bold text-green-900 drop-shadow-sm px-2">
                {{ (evento.totalRecaudado! / evento.objetivoRecaudacion!) | percent:'1.0-0' }} completado
              </div>
            </div>

            <div class="flex justify-between items-center text-sm md:text-[1vw]">
              <span class="font-bold text-green-700">Recaudado: {{ evento.totalRecaudado | currency:'EUR' }}</span>
              <span class="text-gray-500">Objetivo: {{ evento.objetivoRecaudacion | currency:'EUR' }}</span>
            </div>
            
            <p *ngIf="evento.totalRecaudado! >= evento.objetivoRecaudacion!" class="text-center mt-3 md:mt-[1vw] font-bold text-green-600 text-sm md:text-[1.2vw]">
              ¬°Gracias! Hemos superado el objetivo ‚ù§Ô∏è
            </p>
          </div>

          <!-- Botones de acci√≥n -->
          <div class="flex flex-col sm:flex-row gap-4 md:gap-[1vw] mt-auto">
            <button (click)="inscribirse()"
              [disabled]="evento.inscritos >= evento.capacidad"
              [class.opacity-50]="evento.inscritos >= evento.capacidad"
              [class.cursor-not-allowed]="evento.inscritos >= evento.capacidad"
              class="flex-1 bg-green-600 text-white font-bold text-lg md:text-[1.2vw] py-4 md:py-[1vw] rounded-xl md:rounded-[1vw] hover:bg-green-700 transition shadow-md justify-center items-center gap-2 md:gap-[0.5vw] flex">
              <span *ngIf="evento.inscritos < evento.capacidad">Comprar entradas</span>
              <span *ngIf="evento.inscritos >= evento.capacidad">‚õî Aforo Completo</span>
            </button>
            
            </div>

          <p class="text-center text-sm md:text-[0.9vw] text-gray-400 mt-6 md:mt-[1.5vw]">
            Gracias por colaborar con la Fundaci√≥n Cudeca.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

