
<!-- PANTALLA DE TRANSICIÓN INICIAL -->
<div
    *ngIf="!loaded"
    class="fixed inset-0 z-[9999] flex items-center justify-center bg-white transition-opacity duration-700"
    [class.opacity-0]="fadeOut"
>
    <img 
        src="assets/images/cudeca-logo.png"
        class="w-[35vw] md:w-[15vw] animate-fade-zoom"
    />
</div>


<!-- ========================================================= -->
<!-- ======================= HEADER — PC =================== -->
<!-- ========================================================= -->

<header 
  *ngIf="!isAuthRoute"
  class="hidden md:block bg-white shadow-md py-[1vw] absolute w-full z-50">
  
  <div class="flex items-center justify-between w-[96vw] ml-[2vw]">
    
    <img 
      src="assets/images/cudeca-logo.png" 
      alt="Cudeca Logo" 
      class="flex-shrink-0 w-[12vw] h-auto hover:opacity-80 transition-opacity" 
      (click)="goToHome()" 
      style="cursor:pointer;">

    <nav class="flex items-center gap-[3vw]">
      <button (click)="goToHome()" class="bg-transparent font-bold text-green-700 py-[1.2vw] px-[2vw] rounded-full hover:bg-green-700 hover:text-white transition-all text-[2vw]">
        Inicio
      </button>
      
      <button (click)="goToEventos()" class="bg-transparent font-bold text-green-700 py-[1.2vw] px-[2vw] rounded-full hover:bg-green-700 hover:text-white transition-all text-[2vw]">
        Eventos
      </button>
      
      <button (click)="goToDonation()" class="bg-transparent font-bold text-green-700 py-[1.2vw] px-[2vw] rounded-full hover:bg-green-700 hover:text-white transition-all text-[2vw]">
        Donar
      </button>

      <button *ngIf="isLoggedIn" (click)="goToCuenta()" class="bg-transparent font-bold text-green-700 py-[1.2vw] px-[2vw] rounded-full hover:bg-green-700 hover:text-white transition-all text-[2vw]">
        Cuenta
      </button>
      
      <button *ngIf="!isLoggedIn" (click)="goToLogin()" class="bg-green-600 text-white font-bold py-[1vw] px-[2.2vw] rounded-full hover:bg-green-700 shadow-md transition-all text-[2vw]">
        Iniciar sesión
      </button>

      <button (click)="openHelpModal()" class="w-[4vw] h-[4vw] rounded-full flex items-center justify-center bg-gray-100 text-green-700 font-bold hover:bg-green-100 transition-all text-[2vw] ml-[1vw] mr-[1vw]">
        ?
      </button>
    </nav>

  </div>
</header>

<!-- ========================================================= -->
<!-- ======================= HEADER — MÓVIL =================== -->
<!-- ========================================================= -->

<header 
  *ngIf="!isAuthRoute"
  class="md:hidden absolute w-full z-50 flex flex-col">
  
  <div class="w-full h-[40vw] bg-white shadow-md flex items-center justify-between relative z-50">
      
      <img 
        src="assets/images/cudeca-logo.png" 
        class="w-[50vw]"
        (click)="goToHome()"
      />

      <button 
        (click)="menuOpen = !menuOpen"
        class="text-green-700 font-bold text-[20vw] pr-[5vw] focus:outline-none">
        <span *ngIf="!menuOpen">☰</span>
        <span *ngIf="menuOpen">✕</span>
      </button>
  </div>

  <nav 
    *ngIf="menuOpen"
    class="w-full bg-white shadow-lg border-t border-gray-100 flex flex-col text-green-700 font-semibold animate-slide-down relative z-40">
    
    <button (click)="goToHome(); menuOpen = false" class="text-left hover:bg-green-100 py-[4vw] px-[5vw] text-[6vw] border-b border-gray-50">Inicio</button>
    <button (click)="goToEventos(); menuOpen = false" class="text-left hover:bg-green-100 py-[4vw] px-[5vw] text-[6vw] border-b border-gray-50">Eventos</button>
    <button (click)="goToDonation(); menuOpen = false" class="text-left hover:bg-green-100 py-[4vw] px-[5vw] text-[6vw] border-b border-gray-50">Donar</button>
    <button *ngIf="isLoggedIn" (click)="goToCuenta(); menuOpen = false" class="text-left hover:bg-green-100 py-[4vw] px-[5vw] text-[6vw] border-b border-gray-50">Cuenta</button>
    <button *ngIf="!isLoggedIn" (click)="goToLogin(); menuOpen = false" class="text-left hover:bg-green-100 py-[4vw] px-[5vw] text-[6vw] border-b border-gray-50">Iniciar sesión</button>
    <button (click)="openHelpModal(); menuOpen = false" class="text-left hover:bg-green-100 py-[4vw] text-[6vw] px-[5vw]">¿Necesitas ayuda?</button>

  </nav>

</header>



<!-- ========================================================= -->


<!-- Router Outlet: donde se renderizan los componentes -->
<main class="opacity-0 transition-opacity duration-700" [class.opacity-100]="loaded">
  <router-outlet></router-outlet>
</main>

<!-- ========================================================= -->
<!-- ========================= FOOTER ======================== -->
<!-- ========================================================= -->

<footer 
  *ngIf="!isAuthRoute" 
  class="relative bg-green-800 text-white w-full text-center py-[4vw] text-[3.5vw] md:py-[1vw] md:text-[1.2vw]">
  
  <p>
     &copy; 2025 Cudeca - Todos los derechos reservados - Esta web no pretende suplantar a la web original 
     <a href="https://www.cudeca.org/" target="_blank" class="text-green-300 hover:underline">https://www.cudeca.org/</a>
  </p>
  
</footer>

<!-- Help Modal -->
<app-help-modal *ngIf="showHelpModal" (close)="closeHelpModal()"></app-help-modal>

<div
    *ngIf="showEventPopup && promoEventTitle"
    class="fixed bottom-[1.5vw] right-[1.5vw] z-[60] max-w-[26vw] bg-white rounded-[1vw] shadow-2xl border border-green-100 flex overflow-hidden animate-popup"
>
    <div class="hidden md:block w-[30%] overflow-hidden flex-shrink-0">
    <img
        [src]="promoEventImage || 'assets/images/fondoCudeca.png'"
        class="w-full h-full object-cover"
        />
    </div>

<!-- ========================================================= -->
<!-- ========================= POP-UP ======================== -->
<!-- ========================================================= -->

    <div class="flex-1 p-[1vw] flex flex-col gap-[0.5vw]">
        <div class="flex justify-between items-start gap-[0.5vw]">
            <h4 class="text-[1vw] font-bold text-green-900 leading-snug">
                Puede que te interese
            </h4>
            <button
                (click)="cerrarPopupEvento()"
                class="text-gray-400 hover:text-gray-600 text-[1.1vw] leading-none"
            >
                ✕
            </button>
        </div>

        <p class="text-[0.95vw] text-gray-700 leading-snug line-clamp-3">
            {{ promoEventTitle }}
        </p>

        <button
            (click)="irACompraEntradasDestacada(); cerrarPopupEvento()"
            class="self-end bg-emerald-600 text-white text-[0.9vw] font-semibold px-[1.4vw] py-[0.6vw] rounded-full hover:bg-emerald-700 transition-colors"
        >
            Comprar entradas
        </button>
    </div>
</div>
